apiVersion: v1
kind: Pod
metadata:
  name: oneoff-job-initial-inventory-import
  namespace: production
spec:
  restartPolicy: Never
  imagePullSecrets:
    - name: reaction-docker-hub
  containers:
  - name: runner
    image: sportsdirect/reaction-etl-shippable-inventory: 96679782757b2ed3f21398daf6f14b177cf79131
    command: ["node", "run.js", "sdi-bobs-production-feeds-inventory", "reaction-sdi-inventory.BOBS.full.201906211110Z.xml"]
    envFrom:
      - configMapRef:
          name: reaction-core-worker
    env:
      # TODO Grig/Slawek please wire these up as secrets
      #- name: AWS_ACCESS_KEY_ID
      #- name: AWS_SECRET_ACCESS_KEY
      - name: JAEGER_ENDPOINT
        value: "http://af227f3265fed11e98729123d9d2638d-1672043513.us-east-1.elb.amazonaws.com:14268/api/traces"
      - name: KAFKA_BOOTSTRAP_SERVERS
        value: "broker0.kafka-production.k8s.bobs-test.io:9092,broker1.kafka-production.k8s.bobs-test.io:9093,broker2.kafka-production.k8s.bobs-test.io:9094"
      - name: REACTION_LOG_LEVEL
        value: "DEBUG"
    resources:
      limits:
        cpu: 1
        memory: "1024M"
      requests:
        cpu: 1
        memory: "1024M"
