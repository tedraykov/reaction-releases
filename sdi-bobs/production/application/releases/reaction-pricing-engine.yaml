apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: reaction-pricing-engine
  namespace: production
spec:
  releaseName: reaction-pricing-engine
  chart:
    git: git@github.com:sportsdirect/sdi-releases.git
    path: charts/reaction-pricing-engine
    ref: develop
  values:
    image:
      #repository: 490759768946.dkr.ecr.us-east-1.amazonaws.com/reaction-pricing-engine
      repository: docker.io/reactioncommerce/pricing-engine
      tag: "5467ad84a72ae6008e4bc85036e0249919a5a717"
    imagePullSecrets:
      - name: reaction-docker-hub
    ingress:
      enabled: true
      hosts:
        - host: pe.production.k8s.bobs-test.io
        #- host: pe.bobstores.com
          paths: ['/']
    jmx:
      image: reactioncommerce/jmx-prometheus-exporter
      imageTag: configurable-via-env
    config:
      jvmOpts: "-d64 -Xms2560m -Xmx2560m"
      bootstrapServers: "broker0.kafka-production.k8s.bobs-test.io:9092,broker1.kafka-production.k8s.bobs-test.io:9093,broker2.kafka-production.k8s.bobs-test.io:9094"
      zookeeperConnect: '10.200.23.193:2181,10.200.21.234:2181,10.200.22.232:2181'
      autoOffsetReset: "earliest"
      bufferedRecordsPerPartition: "0"
      cacheMaxBytesBuffering: "0"
    resources:
        requests:
            memory: 4Gi
            cpu: 1000m
        limits:
            memory: 4Gi
            cpu: 1000m
    command: [ "tail", "-f", "/dev/null" ]
