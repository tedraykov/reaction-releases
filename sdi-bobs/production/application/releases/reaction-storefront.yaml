apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: reaction-storefront
  namespace: bobs
spec:
  releaseName: reaction-storefront
  chart:
    git: git@github.com:sportsdirect/sdi-releases.git
    path: charts/reaction-storefront
    ref: develop
  values:
    maxUnavailable: 1
    horizontalPodAutoscaler:
      enabled: true
      averageUtilization: 70
      min: 3
      max: 10
    image:
      repository: 490759768946.dkr.ecr.us-east-1.amazonaws.com/reaction-storefront
      tag: "72fa11c29738c7e7972f44f7fdb79f71c23fd890"
    ingress:
      hosts:
        - host: jasper.bobstores.com
          paths: ['/']
    storefront:
      name: bobs
      baseUrl: https://jasper.bobstores.com
      imageUrl: https://jasper.bobstores.com
      defaultShippingMethodId: SPbMh5gdz24Wr4J94
      defaultShippingMethodRate: "2.99"
      elasticsearchUrl: http://elasticsearch:9200
      sessionMaxAge: "2592000000"
      stacktraceEnabled: true
    graphql:
      introspection: true
      url: http://reaction-core-web.bobs.svc.cluster.local/graphql-alpha
    radial:
      clientId: BOBSUS
      mode: production
      rdfUrl: https://rdf.radial.com/rdf/service/scripts?clientIdentifier=BOBSUS
    oauth2:
      clientId: bobs-production-storefront
      url: https://auth.bobstores.com/oauth2/auth
      host: hydra-hydra-admin-service
      idpHostUrl: https://api.bobstores.com
      redirectUrl: https://jasper.bobstores.com/callback
      tokenUrl: http://hydra-hydra-main-service:4444/oauth2/token
      hydraAdminUrl: http://hydra-hydra-admin-service:4445
    contentstack:
      enabled: true
      environment: production
    segmentAnalytics:
      enabled: true
      skipMinimize: true
    sentry:
      enabled: true
      dsn: https://0d6525f016ba482eba2b17fa3266dda9@sentry.io/1397837
      environment: production
    resources:
      requests:
        memory: 500Mi
        cpu: 500m
      limits:
        memory: 2Gi
        cpu: "2"
