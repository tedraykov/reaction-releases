apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: reaction-core-web
  namespace: bobs
spec:
  releaseName: reaction-core-web
  chart:
    git: git@github.com:sportsdirect/sdi-releases.git
    path: charts/reaction-core
    ref: develop
  values:
    horizontalPodAutoscaler:
      enabled: true
      averageUtilization: 70
      min: 3
      max: 10
    image:
      repository: 490759768946.dkr.ecr.us-east-1.amazonaws.com/reaction-core
      tag: "df25b9f1aec65196feec5ebb84be87701253f48a"
    ingress:
      enabled: true
      hosts:
        - host: api.bobstores.com
          paths: ['/']
    config:
      siteCode: BOBS
      startingNewCustomerNumber: "1100151420184"
      rootUrl: https://api.bobstores.com
      cartReferenceIdPrefix: 44
      etcdUrl: http://etcd-application.internal.production.k8s.bobs-test.io:2379
      jaegerEndpoint: https://jaeger-collector.bobstores.com/api/traces
      hydraAdminUrl: http://hydra-hydra-admin-service:4445
      hydraOauth2IntrospectUrl: http://hydra-hydra-admin-service:4445/oauth2/introspect
      kafkaBootstrapServers: broker0.kafka-production.k8s.bobs-test.io:9092,broker1.kafka-production.k8s.bobs-test.io:9093,broker2.kafka-production.k8s.bobs-test.io:9094
      kafkaCluster: broker0.kafka-production.k8s.bobs-test.io:9092,broker1.kafka-production.k8s.bobs-test.io:9093,broker2.kafka-production.k8s.bobs-test.io:9094
      kafkaSchemaRegistryUrl: http://schema-registry.kafka-production.k8s.bobs-test.io:8081
      kafkaPartitionsLoyalty: 3
      kafkaPartitionsEtlShippableInventoryStatus: 1
      kafkaTopicProductImportErrorsPartitions: 3
      kafkaTopicProductImportProductsPartitions: 1
      orderExportRadialUrl: https://tst02-epapi-na.gsipartners.com/v1.0/OOMF/stores
      pricingGraphqlUrl: http://reaction-pricing-engine.bobs:8888/graphql
      inventoryPluginBatchConsumeSize: 1000
      loyaltyPluginBatchConsumeSize: 10000
      initialImport: false
      pricingConsumerEnabled: false
      inventoryShippableInventoryConsumerEnabled: false
      loyaltyConsumerEnabled: false
      taxesConsumerEnabled: false
      productConsumerEnabled: false
      productPublisherAutoPublish: false
    radial:
      storeId: BOBSUS
      mode: sandbox
    resources:
      requests:
        memory: 500Mi
        cpu: 500m
      limits:
        memory: 2Gi
        cpu: "2"
