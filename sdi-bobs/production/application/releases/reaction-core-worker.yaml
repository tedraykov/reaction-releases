apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: reaction-core-worker
  namespace: bobs
spec:
  releaseName: reaction-core-worker
  chart:
    git: git@github.com:sportsdirect/sdi-releases.git
    path: charts/reaction-core
    ref: develop
  values:
    horizontalPodAutoscaler:
      enabled: true
      averageUtilization: 70
      min: 1
      max: 1
    image:
      repository: 490759768946.dkr.ecr.us-east-1.amazonaws.com/reaction-core
      tag: "549c10f383d2efceb01970c775972d5846e0af29"
    config:
      profilingEnabled: false
      healthchecksEnabled: false
      siteCode: BOBS
      startingNewCustomerNumber: "1100151420184"
      rootUrl: https://api.bobstores.com
      cartReferenceIdPrefix: 44
      etcdUrl: http://etcd-application.internal.production.k8s.bobstores.com:2379
      jaegerEndpoint: https://jaeger-collector.bobstores.com/api/traces
      hydraAdminUrl: http://hydra-hydra-admin-service:4445
      hydraOauth2IntrospectUrl: http://hydra-hydra-admin-service:4445/oauth2/introspect
      kafkaBootstrapServers: broker0.kafka-production.k8s.bobs-test.io:9092,broker1.kafka-production.k8s.bobs-test.io:9093,broker2.kafka-production.k8s.bobs-test.io:9094
      kafkaCluster: broker0.kafka-production.k8s.bobs-test.io:9092,broker1.kafka-production.k8s.bobs-test.io:9093,broker2.kafka-production.k8s.bobs-test.io:9094
      kafkaSchemaRegistryUrl: http://schema-registry.kafka-production.k8s.bobs-test.io:8081
      kafkaPartitionsLoyalty: 3
      kafkaPartitionsEtlShippableInventoryStatus: 1
      kafkaTopicProductImportErrorsPartitions: 3
      kafkaTopicProductImportProductsPartitions: 1
      orderExportRadialUrl: https://api-na.gsipartners.com/v1.0/OOMF/stores
      pricingGraphqlUrl: http://reaction-pricing-engine.bobs:8888/graphql
      inventoryPluginBatchConsumeSize: 1000
      loyaltyPluginBatchConsumeSize: 10000
      initialImport: true
      masterPublishConsumerEnabled: true
      pricingConsumerEnabled: true
      inventoryShippableInventoryConsumerEnabled: true
      loyaltyConsumerEnabled: false
      taxesConsumerEnabled: true
      productConsumerEnabled: true
      productPublisherAutoPublish: false
      metricsEnabled: true
      constantPublisherMode: true
      constantPublisherPauseSeconds: 300
    radial:
      storeId: BOBSUS
      mode: production
    resources:
      requests:
        memory: 3Gi
        cpu: "1"
      limits:
        memory: 4Gi
        cpu: "2"
