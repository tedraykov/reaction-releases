apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: kafka-broker
  namespace: staging
spec:
  releaseName: kafka-broker
  chart:
    git: git@github.com:sportsdirect/sdi-releases.git
    path: charts/kafka/charts/cp-kafka
    ref: feature/staging
  values:
    brokers: 3
    ## Kafka Server properties
    ## ref: https://kafka.apache.org/documentation/#configuration
    configurationOverrides:
    ## Options required for communicating with the Kafka Cruise Control monitoring app
      "metric.reporters": "com.linkedin.kafka.cruisecontrol.metricsreporter.CruiseControlMetricsReporter"
    cp-zookeeper:
      enabled: false
      url: kafka-zookeeper-cp-zookeeper:2181
    image: reactioncommerce/cp-kafka-broker
    imageTag: 5.1.2
    imagePullSecrets:
      - name: reaction-docker-hub
    persistence:
      size: 1Ti

