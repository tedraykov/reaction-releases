apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: cluster-autoscaler
  namespace: kube-system
spec:
  releaseName: cluster-autoscaler
  chart:
    repository: https://kubernetes-charts.storage.googleapis.com/
    name: cluster-autoscaler
    version: "0.12.1"
  values:
    autoDiscovery:
      clusterName: kafka-staging.k8s.bobs-test.io
    awsRegion: us-east-1
    cloudProvider: aws
    nodeSelector:
      kubernetes.io/role: master
    resources:
      limits:
        cpu: 100m
        memory: 300Mi
      requests:
        cpu: 100m
        memory: 300Mi
    rbac:
      create: true
    tolerations:
      - { effect: NoSchedule, operator: "Exists", key: node-role.kubernetes.io/master }
