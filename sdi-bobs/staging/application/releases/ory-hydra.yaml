apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: hydra
  namespace: staging
spec:
  interval: 3m
  chart:
    spec:
      chart: "./charts/hydra"
      sourceRef:
        kind: GitRepository
        name: flux2-sync
        namespace: flux
  values:
    hydra:
      autoMigrate: true
      config:
        serve:
          public:
            cors:
              allowed_origins:
                - https://admin-staging.bobs-test.io
                - https://staging.bobs-test.io
              enabled: true
        urls:
          consent: https://staging.bobs-test.io/private/consent
          error: https://staging.bobs-test.io/signin
          login: https://staging.bobs-test.io/signin
          logout: https://staging.bobs-test.io/logout
          self:
            issuer: https://auth-staging.bobs-test.io
      sealedSecrets:
        dsn: AgDN7tDwsz8KflmaCopEqRjhQ10u6MrTq6ipInkRrNxAxs7E3kycnpKz/Ln0DPgU5UJk4v0vte/1jyaZ8yItB09n5f3AwLdXK/He+Oeq1lF5J9muxaw5j/UIFC820kpDx08T4dFmTPfNK+0z+cxJPVObQTNfNvWsQvG/2C59jagDOK5pSw7jm9V5zh+Jl0Wz2m10iDlMhiL0E3dEv3TcM6pb0BVdP9P7MnAH+4ui35NtEVcVFcaLgfxsICVtlVuQx7Tjpxx3dSedunzZyrhaqZtT8E4lsnPKbQ/Y7gdCkj8aeQ+sNyXEvFDjzeDwtRUhPumB6WFuyVJJ5CaT+JUDMP+1EH3r2FbrhtK2jCOLYOexKXvQRrf3yB9iboa7xtQKNXtDeBF7T5uUk5EWbfwkZP4KLLkyjLsc3NHWiZQwRJe77E7sGv7cq8kT9AA/sovUzl9YUdOyujE9pEF6WzX6wRkTC6wcQ9lvQU631aVlhr5z3MN92O//j7I9MBSE7C5WcWm1mhtH3e0en6uJ9tcgQWS55Tc5rmvzg9QN8sJJl6o4a6VIj/FGhLHfyw3TKaR/bubWLkTJzoRT34KKPwvuZdaqPujd7P7Xd17aa3BKRhhUZnIrBOqWBQIu9kRXrIdhRBkYZYQJJE6lRAZxJF7j45CZrV9+HultcOfc/I7wQqNWr/ivEl4Ig9u+9tQ16A1qUoujEWGY6DvUG/6Y7yaMxUfnUyrAy0NzBqRfMQ9F5YalM/uGAxZqxr5yL17Myfyw1Ipe6vNJ6yJKAJVoGe1lVA4Gqi9P3+wbqjV3xemJxSmZOf7e9eAhxw1WvOM8CrO6rxU8GUR4qg==
        secretsSystem: AgC3X5BMgmnPmUVMXEQowyWcNcdFmrSUpZ+JoP6atGLDXhAQRd/WwWsO6fe6WhMj3nBazAS/QIYtaMPJvUGnSCcJxZWyDyMSbnHRR2pjrlMo83LxzY5O3nh5h9MrUZjdBab2sUK5l5xddonhH54R2pFW5+EiK3MJsveB7R8WJUvftGMzBjx/6zzStxCxPwcNVFe99VwR13NylQfuNO763MMJfDorbgYmCjrMRKLgLSJNdILVjS65bbNkLYt8i3We4m0VZedbBeaaj8y5gpq+MHW8j4JTCjTQ6jjAru/X6gf+zZK5nXLcrIw9TzA+Mwww2eg0IxwC4MO4d6MypLmcMUC1keVAPZ1vI8px688Aj3SxkmAHODbfNCLvwUrkffyJ7yeJ/5Ruc7eHYBIinpaUVGrFqRJGiIRsdL/dTJCcdBM4KYcNIH5MPRJCsFHPq4Z06y2watEJDo3WOxmT1VKl31qZBVccJD/VViRDvRkpxwNoSZcCJH10xGG0mPWh2YHswY8W4zHQrFzpWrk7KzFY4C26gnc/FpIDcqTaXgPRm6haWgglQIrWn8n99yMRum6JmxMWqLWZu4m56P/mxk06gnz47VeYOSNZFV4kPICn1X5r4UE5zAqZY4H34pjC9NRHIFYes36SMBbcKGr0Z2IOwyHo2KsOvnCcrkr2wZQxFpXUTJFSAmFcA0/dUw0In/7TGC6W78poIk4BbbI7Vm/JrSI0K+LRibTW5Ffd58JxKMDg+Q==
        secretsCookie: AgCsTK1wt1h8I3fd3TGnw7A9X0w9ItiM3Hl2gqo3o6pTXpXKUnSooCBHcmliK9cY1d5v1KBSZ/gH/aKF0C8+ApJXpYqNoBtNAZwbbFivod1aNeZwvLft+KYXMNfnMc5BqNHA6dOUe20TryLtIeuqNpXrZaMJtas8pn4/yfndUG6RVSHJyo27aiOyTkgbDAUNcNb3bOoeZcl6DnUfvPWV7ae0+T8OUOtYDKAc3ds8KhjtYXk5pJZOxAgAnYgQ0hUWSdENbfhfcS+u5GMCRPXoFrqdWfoqyCTSx1NkVSjvtUbsSvRlo5o+IFx1bjWs5gQZDACWJZhTL1dqiQrFDZw6PSyMQAPvg3ZlHvPg2MSsPrfUaqfyxGZKMLH9ptz+hKGNYx7zc6+B+7cb4WrqMof9LzDyb1NQ0oUhjU/R2orFRUxd0hBvJ+7wdE4VXXNBC3KV+T4i2SSemRXlrRX+IHJT9T0h+50yqAZTXw2Ty6vEu776kA2RYEB8ULcXzmWAOkXdVf9DOTmlXybCu7SfOYEsrV6peaYfFR+/X1S+xSsTwUi8wBr6AmwBWHFo3J0vJObgNhQzmjeI0pxkHE9aLeZNUXZmpR1vKuqp/fWdRRlSS2u2mwlcdv/2jeRIjdHSbANxB3esDo98akxCYCA73g5yD/5J+damfJbPHIznZPqBio+2CX8jL/CVIDjzk//ni7KfpRLXtxqqWxiw4GIJ+l+ZNPYW5QPMkFgQHrA9cx/tmJ3bFQ==
    maester:
      enabled: false
    ingress:
      public:
        enabled: true
        hosts:
          - host: auth-staging.bobs-test.io
            paths: ['/']
