apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: hydra
  namespace: staging
spec:
  skipCRDs: true
  interval: 3m
  chart:
    spec:
      chart: "./charts/ory-hydra"
      sourceRef:
        kind: GitRepository
        name: flux2-sync
        namespace: flux
  values:
    hydra:
      autoMigrate: true
      config:
        serve:
          public:
            cors:
              allowed_origins:
                - https://admin-staging.bobs-test.io
                - https://staging.bobs-test.io
              enabled: true
        urls:
          consent: https://staging.bobs-test.io/private/consent
          error: https://staging.bobs-test.io/signin
          login: https://staging.bobs-test.io/signin
          logout: https://staging.bobs-test.io/logout
          self:
            issuer: https://auth-staging.bobs-test.io
    sealedSecrets:
      dsn: AgA9eJb2ONWXRHpAsktwzQH585Yk/1rsOVF3V9JU9d3dWvVQQTErUxisCW9zkLfOz/OPeznqc0w7cl7kv0F96d4M0d2hEF6pK2Xb0LOBRS6/soCrw6helGHFfmfglk3y/MxXL5++VLBOYhNLOaCgu+slzFNX19KK7l7YEAGOiCkfVtss7UHcZAULybDXpJx93TSp+MubhTuEeTSOAQqKLhLejLpei5lr83VCjKO/9vorbnR55yqR4s422zzBCedX+gz2CfEmq+FQ2LtVynkr2kewubcuJSVDjZifQnMmP7LgWcXTICtysXtGXdJcY6tbB04C56Mwc7DPBXGHvYP748dRG5bqqa47Y0Z8N8cdnSweDlMt15BcGVkOnMQKvR0hDt5woJuePbsH6jDU1AJ1BEHeXN8ksW2fRuadko3JDvypfmHSJNbSdNWeROgLSQDqyZLFv0djK8eECWsg2LiIc8n43F8p+VRU/3OcTdsIYvIz+LCcjVWFBQQLsqcym1Yk4t2cn//gSOB/JBG/F9vLLMZ2KyXtMr+dcA8COUR9kCNmhALMGfOOWNPvjszshEmd6oQ+gVz+MVIYKXSw/W7M0uqLFYevrf1Z8ia9dRWcmFh/T/xZv9cmPGfvgtCjGsnFznsC51+CpNpcTmUBhGqEwf8Ba5fkSm3UyzpNoh0zRjWilC2QRqh/BXhxxGZcgNlH7EhP0LxbvtD32xBcic174Lv8I/W5qIMPzVvjqbMvigDCFuFzuM3SAKDjdf7RKVuLVr+gcMhVgeqD0g9FFBBsAAIoXmNq/8WcgzQit35M/bDjWa/fAMEtTsP34xDvr8UebxQgxOJs
      secretsCookie: AgB+ldbOeRzg3cQIqnx7WgDfxVoucAoTIBh3MD2yNH2fVI3skFCCHWj8x8oswZrI1zuM6Dn+qA5fgcm8Et8DhZUoDF1GXreR/NLwhRaq718l3M0y9ihFO0rF6uCAY+b4FZ+UtFdfK3KylR+Q7qj2mtl3vpdmLGfyuzDIu9LBh5UVz2VZn8DRjt8kg7dmpi5UJDbhIodApnrPeE0vw69XNesXf2rG5bNlNurIBhqEWh1KOQG8cLE82dzUM5dMfxnOvIOyWG4zDxWB3T9RzT3v0hIIvvFrzl/o+v7yRp3xrZJrTZcdzyS5sAHwAr+c7WuUokmX1GBe1ewNBImjPL0+c0xpJixyeFtSQyZxB0sOXHRumBDZHQgLaB3LPqk/OZ2ZyA9PWjU8GlaXM+dTkmThmIHWlx/by+k0xXJy/3ecsjliluPFG4sLpfy46pup4pC+QrAXQSWBBfGV6h0k45miiaqTM3BAruqv5srfVx8mAXDScY8NViYkIxoEuracKtbiAaFgEMnB/WpeBpX8J4rMmaBlkPsAtId4u1Delr9beLLAjkOTkh5b+RfTJDbzywTM/juwXDx5Nr1xesJywVuInsgdeYPI7glFTdWtB8hG+rd0NcvECk1kOvgTBy/6A0yzr7wDaXIMPMlbOkIv9eqUPJ0RYd8y46K0j0aS4g4M5+sQYScv2vDTp0WFJR3EKhdks8eYExMUCKjey3g9lWo4cgG3IyrlNR6Ay0tbOjjb/EQfAw==
      secretsSystem: AgBypueLfwfekD6/Vm4VelnoQjYuUit0yDuVuX/i331G5OVk3fE515WITEoKYz8ljF5XtS+IU0Zm3iF93oNcdckLtdH6y3szTYkNZ1jpI7/W/tzyZuhZTKkbb18r7/koiRut9RTsIClGNzJt9aV2qydHcJ5RL41yy+NqFEJ+bfz2zEyRUhBQKTO6UlDAns5BGO+1PnR0y7OgOVhv+5QlurYems2bSCVEXpYYbZFkhB1zWeXXCZtDri+U6jO1F8nGcefdrwY9PIGrS3B2e0UAqmeVcQJiElgknFRlwBfS5lp20+9da80zBZHHBUvDZiS3xo7QWfMhuYRLijWwvpW+kvIlFSt3CJtzVsn+5nGD/b7wBhaxyu3Gq2UqP0qdJL59xgY2NEd7U7rzd0it1zT1L9jwCJo38MWhQe9Wke9o1HVA5rSJxZ9VQWY0vpeLUj4NLS8Xsv0FRJK9lI4mAEUm3SWc2ZVmdhcvLyd6tnGj++O9Y3wp0W7IoGao7yMgezKtfUW5Uq7wRjA9ahAUeOT1SraVtCbX5cFpMT627FUUkuscsJJSu/Vx8frulXsToa+AnCgsQOGwtWV6ArtP+Y2nCvwMVwXeP22myE/aNAfme1RroFqnWMwB2GT0Vc0cODtA9OmK3GhSB1sR3j8OdEfsBgrZPElf+Ivabrv4QZb7MwtoA4olE6NSs7260eWnUY5kHdZR6JPDXXdbg6+qOBOS/kjIPbO7KFZyNEpTr6sXZX8kag== 
    maester:
      enabled: false
    image:
      repository: oryd/hydra
      tag: v1.4.6
    ingress:
      public:
        enabled: true
        annotations:
            ingress.kubernetes.io/ssl-redirect: 'false'
            kubernetes.io/ingress.class: nginx 
        hosts:
          - host: auth-staging.bobs-test.io
            paths:
            - /
