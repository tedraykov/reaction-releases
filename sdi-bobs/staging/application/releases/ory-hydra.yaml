apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: hydra
  namespace: staging
spec:
  skipCRDs: true
  interval: 3m
  chart:
    spec:
      chart: "./charts/ory-hydra"
      sourceRef:
        kind: GitRepository
        name: flux2-sync
        namespace: flux
  values:
    hydra:
      autoMigrate: true
      config:
        serve:
          public:
            cors:
              allowed_origins:
                - https://admin-staging.bobs-test.io
                - https://staging.bobs-test.io
              enabled: true
        urls:
          consent: https://staging.bobs-test.io/private/consent
          error: https://staging.bobs-test.io/signin
          login: https://staging.bobs-test.io/signin
          logout: https://staging.bobs-test.io/logout
          self:
            issuer: https://auth-staging.bobs-test.io
    sealedSecrets:
      dsn: AgAJ5jSOUqF+M4SRPTyAEu9qaNXC1Ln2v7lw7nhcOfF6u3ecxJIAtLwSbq1VEvRNvmF/tq1++pKynF+VCTbvV8MqEFxJaxN4StU6SWoX4G6mp1eyfi+PD6/ZdaIrJad1FHIsJPDrovyqsFzVMqpsDTPrgZR3JPxApHiZ+FbriN333SIw3nC0PMFy89Sq8hwoJrgaNHNoxF3UgLyeC1x4ebs8c4iD+p0p5YfkaFTTZ3AhoZjQmDTXGrn4CQfFkFNaQgOIlE1cnoM1MXfOdD2h2t3khqte1lmXi4FPEgIzWVB9RzAWEJpiIi+m5fW8PmwTeNrt3LKZamSZbSo4ayABpB8BzjvQgUyfD6+Uqx+9ph+TgIzvvAFGUAxNisvE8QR7RwJsw6hPopVcmvOiKLnMzLuIy18gSTuiHAQs/ppGNnQtyuwe6dnYgeE4IpvRvKvLsg914KNgZlwV5VkksmBmFPMM4pvGbnmkvaavv74H6hMB0xqoj8yVl90lF/JbKg7E77QVkdqUWzErc6xKSdVA/UnJq1Iyx4fC7+D570oQwd2c8UJSDc6K5PFSGFNC548/O1cnXTr5EdTiUD+P9nQ3nXLQFMDSB3fuHuvB3YBY9H2VdYH+HEbzu1MygRO4fGQiUXMRFHPDWFppFr+4ara8dvQnBV8AMZPhWMiBTz+GglPaOqLhyoSTR+l9QQFO5r63aYvilDqknLYbcONTVhTBM9mkyorHZrRVGUc9u4Wlmxa/8RLsuP4KmP+1f2+UOHdQUpNh03FtAjdClSSpUubk47qcH0yg573aoNgJ7tj6ih1dRD4Dn+375G/6xlQoT6EVu25MG/Sl
      secretsCookie: AgB+ldbOeRzg3cQIqnx7WgDfxVoucAoTIBh3MD2yNH2fVI3skFCCHWj8x8oswZrI1zuM6Dn+qA5fgcm8Et8DhZUoDF1GXreR/NLwhRaq718l3M0y9ihFO0rF6uCAY+b4FZ+UtFdfK3KylR+Q7qj2mtl3vpdmLGfyuzDIu9LBh5UVz2VZn8DRjt8kg7dmpi5UJDbhIodApnrPeE0vw69XNesXf2rG5bNlNurIBhqEWh1KOQG8cLE82dzUM5dMfxnOvIOyWG4zDxWB3T9RzT3v0hIIvvFrzl/o+v7yRp3xrZJrTZcdzyS5sAHwAr+c7WuUokmX1GBe1ewNBImjPL0+c0xpJixyeFtSQyZxB0sOXHRumBDZHQgLaB3LPqk/OZ2ZyA9PWjU8GlaXM+dTkmThmIHWlx/by+k0xXJy/3ecsjliluPFG4sLpfy46pup4pC+QrAXQSWBBfGV6h0k45miiaqTM3BAruqv5srfVx8mAXDScY8NViYkIxoEuracKtbiAaFgEMnB/WpeBpX8J4rMmaBlkPsAtId4u1Delr9beLLAjkOTkh5b+RfTJDbzywTM/juwXDx5Nr1xesJywVuInsgdeYPI7glFTdWtB8hG+rd0NcvECk1kOvgTBy/6A0yzr7wDaXIMPMlbOkIv9eqUPJ0RYd8y46K0j0aS4g4M5+sQYScv2vDTp0WFJR3EKhdks8eYExMUCKjey3g9lWo4cgG3IyrlNR6Ay0tbOjjb/EQfAw==
      secretsSystem: AgBypueLfwfekD6/Vm4VelnoQjYuUit0yDuVuX/i331G5OVk3fE515WITEoKYz8ljF5XtS+IU0Zm3iF93oNcdckLtdH6y3szTYkNZ1jpI7/W/tzyZuhZTKkbb18r7/koiRut9RTsIClGNzJt9aV2qydHcJ5RL41yy+NqFEJ+bfz2zEyRUhBQKTO6UlDAns5BGO+1PnR0y7OgOVhv+5QlurYems2bSCVEXpYYbZFkhB1zWeXXCZtDri+U6jO1F8nGcefdrwY9PIGrS3B2e0UAqmeVcQJiElgknFRlwBfS5lp20+9da80zBZHHBUvDZiS3xo7QWfMhuYRLijWwvpW+kvIlFSt3CJtzVsn+5nGD/b7wBhaxyu3Gq2UqP0qdJL59xgY2NEd7U7rzd0it1zT1L9jwCJo38MWhQe9Wke9o1HVA5rSJxZ9VQWY0vpeLUj4NLS8Xsv0FRJK9lI4mAEUm3SWc2ZVmdhcvLyd6tnGj++O9Y3wp0W7IoGao7yMgezKtfUW5Uq7wRjA9ahAUeOT1SraVtCbX5cFpMT627FUUkuscsJJSu/Vx8frulXsToa+AnCgsQOGwtWV6ArtP+Y2nCvwMVwXeP22myE/aNAfme1RroFqnWMwB2GT0Vc0cODtA9OmK3GhSB1sR3j8OdEfsBgrZPElf+Ivabrv4QZb7MwtoA4olE6NSs7260eWnUY5kHdZR6JPDXXdbg6+qOBOS/kjIPbO7KFZyNEpTr6sXZX8kag== 
    maester:
      enabled: false
    image:
      repository: oryd/hydra
      tag: v1.4.6
    ingress:
      public:
        enabled: true
        annotations:
            ingress.kubernetes.io/ssl-redirect: 'false'
            kubernetes.io/ingress.class: nginx 
        hosts:
          - host: auth-staging.bobs-test.io
            paths:
            - /