apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: ory-hydra
  namespace: staging
spec:
  releaseName: ory-hydra
  chart:
    git: git://github.com/ory/k8s
    path: helm/charts/hydra
    ref: refs/tags/v0.3.5
  helmVersion: v3
  skipCRDs: true
  values:
    hydra:
      autoMigrate: true
      config:
        serve:
          public:
            cors:
              allowed_origins:
                - https://admin-staging.bobs-test.io
                - https://staging.bobs-test.io
              enabled: true
        urls:
          consent: https://staging.bobs-test.io/private/consent
          error: https://staging.bobs-test.io/signin
          login: https://staging.bobs-test.io/signin
          logout: https://staging.bobs-test.io/logout
          self:
            issuer: https://auth-staging.bobs-test.io
      existingSecret: ory-hydra
    maester:
      enabled: false
    ingress:
      public:
        enabled: true
        hosts:
          - host: auth-staging.bobs-test.io
            paths: ['/']
