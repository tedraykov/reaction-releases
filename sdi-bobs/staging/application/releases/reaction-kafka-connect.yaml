apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: reaction-kafka-connect
  namespace: staging
spec:
  releaseName: reaction-kafka-connect
  chart:
    git: git@github.com:sportsdirect/sdi-releases.git
    path: charts/reaction-kafka-connect
    ref: develop
  values:
    horizontalPodAutoscaler:
      enabled: true
      averageUtilization: 70
      min: 1
      max: 5
    image:
      repository: docker.io/reactioncommerce/reaction-kafka-connect
      tag: 13985b30e691499150ff026255bb6fdf05e531a3
    imagePullSecrets:
      - name: reaction-docker-hub
    config:
      connectBootstrapServers: broker0.kafka-staging.k8s.bobs-test.io:9092,broker1.kafka-staging.k8s.bobs-test.io:9093,broker2.kafka-staging.k8s.bobs-test.io:9094
      connectRestAdvertisedHostName: kafka-connect-staging.bobs-test.io
      connectKeyConverterSchemaRegistryUrl: http://schema-registry.kafka-staging.k8s.bobs-test.io:8081
      connectValueConverterSchemaRegistryUrl: http://schema-registry.kafka-staging.k8s.bobs-test.io:8081
    resources:
      requests:
        memory: 2Gi
        cpu: "1"
      limits:
        memory: 3Gi
        cpu: "2"
