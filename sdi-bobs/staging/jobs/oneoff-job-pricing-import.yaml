apiVersion: v1
kind: Pod
metadata:
  name: oneoff-job-pricing-import
  namespace: bobs
spec:
  restartPolicy: Never
  imagePullSecrets:
    - name: dockerhub-creds
  containers:
  - name: runner
    image: reactioncommerce/oneoff-job-pricing-import
    command: [ "node", "--max-old-space-size=4096", "run.js", "sdi-staging-feeds-pricing-bobs", "BOBS_Web_PermPriceBook_2019-04-17_17-05-06.zip" ]
    # This provides: MONGO_HOST, MONGO_DB, GRAFANA_AUTH_TOKEN, CLOUDFLARE_CLIENT_ID, CLOUDFLARE_CLIENT_SECRET
    envFrom:
      - secretRef:
          name: oneoffjobs
    env:
      # - name: AWS_ACCESS_KEY_ID
      #- name: AWS_SECRET_ACCESS_KEY
      - name: PRICING_GRAPHQL_URL
        value: "http://reaction-pricing-engine/graphql"
      - name: GRAFANA_API
        value: "https://grafana-staging.bobs-test.io/api"
    resources:
      limits:
        cpu: 1
        memory: "4096M"
      requests:
        cpu: 1
        memory: "4096M"
