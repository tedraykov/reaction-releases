apiVersion: v1
kind: Pod
metadata:
  name: oneoff-job-tag-import
  namespace: staging
spec:
  restartPolicy: Never
  imagePullSecrets:
    - name: dockerhub-creds
  containers:
  - name: runner
    image: reactioncommerce/oneoff-reaction-etl-import-tax-codes
    command: [ "make", "start" ]
    envFrom:
      - secretRef:
          name: oneoffjobs
    env:
      - name: SITE_CODE
        value: "BOBS"
      - name: MONGO_DB
        value: "bobs-staging"
      - name: ACTION
        value: "not purge"
      # - name: MONGO_HOST --> specified in oneoffjobs secret
      # - name: GRAFANA_AUTH_TOKEN --> specified in oneoffjobs secret
      # - name: CLOUDFLARE_CLIENT_ID --> specified in oneoffjobs secret
      # - name: CLOUDFLARE_CLIENT_SECRET --> specified in oneoffjobs secret
    imagePullPolicy: Always
    resources:
      limits:
        cpu: 1
        memory: "1028M"
      requests:
        cpu: 1
        memory: "1028M"
